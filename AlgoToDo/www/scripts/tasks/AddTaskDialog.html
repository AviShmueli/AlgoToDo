<md-dialog aria-label="Mango (Fruit)" dir="rtl" layout="column" ng-class="{'fullscreen-dialog': vm.isSmallScrean}" ng-cloak>
    <md-toolbar>
        <div class="md-toolbar-tools">                          
            <md-button class="md-icon-button" ng-click="vm.cancel()">
                <ng-md-icon icon="arrow_forward" aria-label="Close dialog"></ng-md-icon>
            </md-button>           
            <h3 class="color-white">משימה חדשה</h3>
            <span flex></span>
            <md-button class="md-icon-button" aria-label="report" ng-click="vm.takePic('camera')">
                <ng-md-icon icon="add_a_photo"></ng-md-icon>
            </md-button>
            <md-button class="md-icon-button" type="submit" ng-click="vm.save()" ng-disabled="newTaskForm.$invalid">
                <ng-md-icon class="rotate" icon="send" aria-label="send" ng-hide="vm.submitInProcess"></ng-md-icon> 
                <md-progress-circular md-mode="indeterminate" ng-show="vm.submitInProcess" md-diameter="20px" class="md-accent md-hue-2"></md-progress-circular>
            </md-button>
        </div>
    </md-toolbar>
    <md-dialog-content flex md-scroll-y class="md-padding" layout-margin>
        <form name="newTaskForm" novalidate>
            <div layout layout-sm="column">
                <md-contact-chips flex md-input-name="autocompleteField"
                                  md-autofocus="true" ng-required="true"
                                  ng-model="vm.selectedRecipients"
                                  md-contacts="vm.querySearch($query)"
                                  md-contact-name="name"
                                  md-contact-image="avatarFullUrl"
                                  md-require-match="true"
                                  md-highlight-flags="i"
                                  placeholder="נמען"
                                  secondary-placeholder="הוסף נמען">
                </md-contact-chips>
                
            </div>
            <div ng-show="vm.showNoRecipientsSelectedError">
                <div class="input-message-validate">נמען הוא שדה <b>חובה</b></div>
            </div>
            <div layout layout-sm="column">
                <md-input-container flex class="md-block">
                    <label>תיאור המשימה</label>
                    <textarea class="texterea-font-size new-task-text" name="description" ng-model="vm.task.description" md-maxlength="150" rows="2" max-rows="7" required md-no-asterisk="true"></textarea>
                    <div ng-messages="newTaskForm.description.$error" ng-if="newTaskForm.description.$touched">
                        <div ng-message="required">נא להכניס תיאור למשימה</div>
                    </div>
                </md-input-container>
            </div>

            <div class="image-wraper" layout layout-sm="column" ng-show="vm.taskHasImage">
                <img id="new-task-image" ng-src="{{vm.emptyFileUrl}}"/>
                <!--<md-progress-circular md-mode="indeterminate" ng-if="vm.takeingPic" md-diameter="40px" class="md-accent md-hue-2"></md-progress-circular>-->
            </div>

        </form>

    </md-dialog-content>   
</md-dialog>